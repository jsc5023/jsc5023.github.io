# 배달의민족으로 알아보는 MSA 개념

## 목차
- [배달의민족으로 알아보는 MSA 개념](#배달의민족으로-알아보는-msa-개념)
  - [목차](#목차)
  - [들어가며](#들어가며)
  - [MSA란 무엇인가?](#msa란-무엇인가)
  - [MSA와 단일 책임 원칙(SRP)](#msa와-단일-책임-원칙srp)
  - [실제 서비스로 이해하는 MSA](#실제-서비스로-이해하는-msa)
    - [기존 방식(모놀리식)의 문제점](#기존-방식모놀리식의-문제점)
    - [MSA 방식의 장점](#msa-방식의-장점)
  - [MSA의 실제 효과](#msa의-실제-효과)
  - [결론](#결론)

## 들어가며

MSA(Microservice Architecture)를 처음 접했을 때는 단순히 '서비스를 잘게 쪼개는 것'이라고만 생각했습니다. 하지만 실제로 공부해보니 그 이상의 깊이 있는 아키텍처 패턴이었습니다. 이 글에서는 제가 MSA를 공부하면서 깨달은 점들을 정리해보려 합니다.

## MSA란 무엇인가?

MSA는 하나의 큰 애플리케이션을 여러 개의 작은 애플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 아키텍처입니다. 여기서 중요한 점은 단순히 '쪼개는 것'이 아니라, 각 서비스가 독립적으로 배포가능하고 확장가능하도록 만드는 것입니다.

## MSA와 단일 책임 원칙(SRP)

MSA는 객체지향 프로그래밍의 단일 책임 원칙(Single Responsibility Principle)과 유사한 철학을 가지고 있습니다:

- 클래스가 하나의 책임만 가져야 하듯이, 각 마이크로서비스도 하나의 비즈니스 기능에 집중합니다
- 이는 코드의 응집도를 높이고 결합도를 낮추는 것과 같은 맥락입니다
- 서비스 간의 독립성을 보장함으로써 변경의 영향범위를 최소화할 수 있습니다

## 실제 서비스로 이해하는 MSA

배달의민족이나 쿠팡 같은 서비스를 예로 들어 MSA를 이해해보겠습니다.

### 기존 방식(모놀리식)의 문제점
- 모든 기능(주문, 결제, 알림, 리뷰 등)이 하나의 큰 프로그램에 통합되어 있음
- 한 부분에 문제가 생기면 전체 서비스가 영향을 받을 수 있음
- 특정 기능만 확장하기 어려움

### MSA 방식의 장점
각 기능을 독립적인 서비스로 분리하여 운영:

1. **중요 서비스 (신뢰성 필수)**
   - 로그인/회원 시스템
     * 보안이 중요함
     * 절대 장애가 나면 안 됨
   - 결제 시스템
     * 돈과 직결된 부분
     * 100% 정확성 필요
   - 주문 시스템
     * 실시간 처리 중요
     * 데이터 일관성 필수

2. **부가 서비스 (일시적 장애 허용)**
   - 리뷰 시스템
     * 잠시 멈춰도 주문은 가능
     * 약간의 지연 허용됨
   - 알림 시스템
     * 푸시 알림이 늦게 가도 큰 문제 없음
     * 재시도 메커니즘으로 해결 가능
   - 쿠폰/이벤트 시스템
     * 일시적 접속 장애 허용됨
     * 나중에 다시 시도 가능

## MSA의 실제 효과

1. **장애 격리**
   - 결제 시스템에 문제가 생겨도 리뷰 열람은 가능
   - 리뷰 서버가 다운되어도 주문/결제는 정상 작동
   - 알림이 지연되어도 주문 프로세스는 완료

2. **리소스 최적화**
   - 주문이 몰리는 시간에는 주문 서비스만 확장
   - 결제 시스템은 항상 안정적인 리소스 유지
   - 리뷰 시스템은 상대적으로 적은 리소스로 운영

3. **비용 효율성**
   - 중요 서비스에 더 많은 투자
   - 부가 서비스는 비용 효율적으로 운영
   - 필요한 부분만 선택적으로 확장 가능

## 결론

MSA는 단순히 서비스를 잘게 쪼개는 것이 아닌, 비즈니스의 특성에 따라 서비스를 적절히 분리하고 각각에 맞는 리소스와 아키텍처를 적용하는 것입니다. 실제 서비스를 예로 들어보면, 모든 기능이 같은 수준의 안정성이나 신뢰성을 필요로 하지 않는다는 것을 알 수 있습니다.

중요한 것은 모든 서비스를 무조건 마이크로서비스로 분리하는 것이 아니라, 비즈니스 요구사항과 각 서비스의 특성을 고려하여 적절한 수준의 분리를 결정하는 것입니다. 이러한 균형잡힌 접근이 성공적인 MSA 구현의 핵심이라고 할 수 있습니다.
